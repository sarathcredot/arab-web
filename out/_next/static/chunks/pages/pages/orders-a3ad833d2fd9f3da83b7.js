(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8617],{7484:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",s="second",a="minute",i="hour",u="day",c="week",o="month",l="quarter",d="year",f="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},b={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),s=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(s,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),s=t.clone().add(n,o),a=r-s<0,i=t.clone().add(n+(a?-1:1),o);return+(-(n+(r-s)/(a?s-i:i-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:o,y:d,w:c,d:u,D:f,h:i,m:a,s:s,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},$="en",y={};y[$]=g;var w="$isDayjsObject",D=function(e){return e instanceof M||!(!e||!e[w])},N=function e(t,r,n){var s;if(!t)return $;if("string"==typeof t){var a=t.toLowerCase();y[a]&&(s=a),r&&(y[a]=r,s=a);var i=t.split("-");if(!s&&i.length>1)return e(i[0])}else{var u=t.name;y[u]=t,s=u}return!n&&s&&($=s),s||!n&&$},O=function(e,t){if(D(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new M(r)},S=b;S.l=N,S.i=D,S.w=function(e,t){return O(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var M=function(){function g(e){this.$L=N(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var v=g.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var s=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return S},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(e,t){var r=O(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return O(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<O(e)},v.$g=function(e,t,r){return S.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,n=!!S.u(t)||t,l=S.p(e),h=function(e,t){var s=S.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?s:s.endOf(u)},p=function(e,t){return S.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},m=this.$W,g=this.$M,v=this.$D,b="set"+(this.$u?"UTC":"");switch(l){case d:return n?h(1,0):h(31,11);case o:return n?h(1,g):h(0,g+1);case c:var $=this.$locale().weekStart||0,y=(m<$?m+7:m)-$;return h(n?v-y:v+(6-y),g);case u:case f:return p(b+"Hours",0);case i:return p(b+"Minutes",1);case a:return p(b+"Seconds",2);case s:return p(b+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,c=S.p(e),l="set"+(this.$u?"UTC":""),h=(r={},r[u]=l+"Date",r[f]=l+"Date",r[o]=l+"Month",r[d]=l+"FullYear",r[i]=l+"Hours",r[a]=l+"Minutes",r[s]=l+"Seconds",r[n]=l+"Milliseconds",r)[c],p=c===u?this.$D+(t-this.$W):t;if(c===o||c===d){var m=this.clone().set(f,1);m.$d[h](p),m.init(),this.$d=m.set(f,Math.min(this.$D,m.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[S.p(e)]()},v.add=function(n,l){var f,h=this;n=Number(n);var p=S.p(l),m=function(e){var t=O(h);return S.w(t.date(t.date()+Math.round(e*n)),h)};if(p===o)return this.set(o,this.$M+n);if(p===d)return this.set(d,this.$y+n);if(p===u)return m(1);if(p===c)return m(7);var g=(f={},f[a]=t,f[i]=r,f[s]=e,f)[p]||1,v=this.$d.getTime()+n*g;return S.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=e||"YYYY-MM-DDTHH:mm:ssZ",s=S.z(this),a=this.$H,i=this.$m,u=this.$M,c=r.weekdays,o=r.months,l=r.meridiem,d=function(e,r,s,a){return e&&(e[r]||e(t,n))||s[r].slice(0,a)},f=function(e){return S.s(a%12||12,e,"0")},p=l||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(m,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return u+1;case"MM":return S.s(u+1,2,"0");case"MMM":return d(r.monthsShort,u,o,3);case"MMMM":return d(o,u);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,c,2);case"ddd":return d(r.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(a);case"HH":return S.s(a,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return p(a,i,!0);case"A":return p(a,i,!1);case"m":return String(i);case"mm":return S.s(i,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,f,h){var p,m=this,g=S.p(f),v=O(n),b=(v.utcOffset()-this.utcOffset())*t,$=this-v,y=function(){return S.m(m,v)};switch(g){case d:p=y()/12;break;case o:p=y();break;case l:p=y()/3;break;case c:p=($-b)/6048e5;break;case u:p=($-b)/864e5;break;case i:p=$/r;break;case a:p=$/t;break;case s:p=$/e;break;default:p=$}return h?p:S.a(p)},v.daysInMonth=function(){return this.endOf(o).$D},v.$locale=function(){return y[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=N(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return S.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),k=M.prototype;return O.prototype=k,[["$ms",n],["$s",s],["$m",a],["$H",i],["$W",u],["$M",o],["$y",d],["$D",f]].forEach((function(e){k[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),O.extend=function(e,t){return e.$i||(e(t,M,O),e.$i=!0),O},O.locale=N,O.isDayjs=D,O.unix=function(e){return O(1e3*e)},O.en=y[$],O.Ls=y,O.p={},O}()},3021:function(e,t,r){"use strict";r.r(t);var n=r(6265),s=r(809),a=r.n(s),i=r(2447),u=r(4121),c=r(7261),o=r(7294),l=r(8216),d=r(2679),f=r(8974),h=r(2132),p=r(5708),m=r(2806),g=r(6723),v=r(1649),b=r(6058),$=r(4718),y=r(1919),w=r(3331),D=r(7484),N=r.n(D),O=o.createElement;function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(){var e=(0,c.Z)(["\n  mutation GetUserIvoiceSignedUrl($input: GetUserIvoiceUrlInput!) {\n    getUserIvoiceSignedUrl(input: $input) {\n      url\n    }\n  }\n"]);return k=function(){return e},e}function _(){var e=(0,c.Z)(["\n  mutation CancelUserOrderProduct($input: CancelUserOrderProductInput!) {\n    cancelUserOrderProduct(input: $input) {\n      _id\n    }\n  }\n"]);return _=function(){return e},e}function P(){var e=(0,c.Z)(["\n  query GetUserOrderProducts($input: GetUserOrderProductsInput!) {\n    getUserOrderProducts(input: $input) {\n      maxRecords\n      records {\n        _id\n        productId\n        vendorId\n        orderId\n        itemId\n        productName\n        shortDescription\n        skuId\n        image {\n          fileType\n          fileURL\n          mimeType\n          originalName\n        }\n        returnPeriod\n        mrp\n        sellingPrice\n        shippingCharge\n        paymentMode\n        paymentStatus\n        orderDate\n        shippingStatus\n        shippedDate\n        deliveryDate\n        returnStatus\n        returnDate\n        returnRequestDate\n        returnRejectedDate\n        returnUserReason\n        refundStatus\n        refundAmount\n        refundDate\n        cancelledDate\n        cancelUserReason\n        courierId\n        invoiceNumber\n        invoice {\n          fileType\n          fileURL\n          mimeType\n          originalName\n        }\n      }\n    }\n  }\n"]);return P=function(){return e},e}var I=(0,b.Ps)(P()),x=(0,b.Ps)(_()),U=(0,b.Ps)(k());t.default=(0,w.Z)({ssr:!1})((0,l.$j)((function(e){return{wishlist:e.wishlist.list?e.wishlist.list:[]}}),M(M(M({},p.Nw),m.Nw),g.Nw))((function(e){e.wishlist,e.addToCart,e.removeFromWishlist,e.showQuickView;var t=(0,o.useState)(0),r=t[0],n=(t[1],(0,o.useState)([])),s=n[0],c=n[1],l=function(e){switch(e){case"PENDING":case"IN_PROGRESS":return"#FFA500";case"COMPLETED":return"#44961D";default:return"#000000"}},p=(0,$.a)(I,{variables:{input:{page:null,size:null}},fetchPolicy:"network-only"}),m=(p.data,p.loading,p.error,p.refetch,(0,y.D)(x)),g=(0,u.Z)(m,1)[0],b=(0,y.D)(U),w=(0,u.Z)(b,1)[0],D=(0,$.a)(I,{variables:{input:{page:null,size:null}}}),S=D.data,M=(D.loading,D.error),k=D.refetch;(0,o.useEffect)((function(){M?console.error("Error fetching orders:",M):S&&c(S.getUserOrderProducts.records||[])}),[S,M]),console.log(s,"gggggggggggggggggggggggg");var _=function(){var e=(0,i.Z)(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g({variables:{input:{_id:t}}});case 3:r=e.sent,console.log(r.message),k(),h.Am.success(O("div",{style:{padding:"10px"}},"Your order has been canceled.")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.Z)(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w({variables:{input:{_id:t}}});case 3:r=e.sent,n=r.data.getUserIvoiceSignedUrl.url,window.open(n,"_blank"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h.Am.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return O("main",{className:"main"},O("div",{className:"container"},O("nav",{"aria-label":"breadcrumb",className:"breadcrumb-nav"},O("div",{className:"container"},O("ol",{className:"breadcrumb"},O("li",{className:"breadcrumb-item"},O(f.Z,{href:"/"},O(v.QO$,{style:{fontSize:"16px"}}))),O("li",{className:"breadcrumb-item active","aria-current":"page"},O(f.Z,{href:"/pages/account"},"My account")),O("li",{className:"breadcrumb-item active","aria-current":"page"},O(f.Z,{className:"activeitem",href:"/pages/orders"},"Orders")))))),O("div",{className:" d-flex flex-column align-items-center"},O("ul",{className:"checkout-progress-bar d-flex justify-content-center flex-wrap",style:{backgroundColor:"#F9F9F9",width:"100%"}},O("li",{className:""},O(f.Z,{href:"/pages/account"},"My Account")),O("li",{className:"active"},O(f.Z,{href:"/pages/orders"},"Orders")))),O("div",{className:"container",style:{marginTop:"2rem",borderBottom:"1px solid",borderColor:"#E2E2E2"}},O("h4",null,"Orders")),O("div",{className:"container",style:{}},O("div",{className:"success-alert"},1===r?O("p",null,"Product successfully removed."):"",2===r?O("p",null,"Product added to cart successfully."):""),0===s.length?O("div",{className:"wishlist-table-container"},O("div",{className:"table table-wishlist mb-0"},O("div",{className:"wishlist-empty-page text-center"},O("i",{class:"fa fa-shopping-bag","aria-hidden":"true"}),O("p",null,"No products Ordered"),O(f.Z,{href:"/shop",className:"btn btn-dark btn-add-cart product-type-simple btn-shop font1 w-auto"},"go shop"," ")))):O("div",{className:"wishlist-table-container"},O("table",{className:"table table-wishlist mb-0"},O("thead",null,O("tr",null,O("th",{className:"thumbnail-col"},"Product"),O("th",{className:"status-col"}),O("th",{className:"status-col"},"Order Id"),O("th",{className:"status-col"},"Date"),O("th",{className:"status-col"},"Status"),O("th",{className:"price-col"},"Total Price"),O("th",{className:"action-col"},"Actions"))),O("tbody",null,s.map((function(e,t){return O("tr",{key:"wishlist-item"+t,className:"product-row"},O("td",{className:"media-with-lazy"},O("figure",{className:"product-image-container"},O(f.Z,{href:"/product/default/".concat(e.productId),className:"product-image"},O(d.LazyLoadImage,{alt:"product",src:e.image.fileURL,threshold:500,width:"80",height:"80"})))),O("td",null,O("h5",{className:"product-title"},O(f.Z,{href:"/product/default/".concat(e.productId)},e.productName))),O("td",{style:{color:"black"}},e.orderId),O("td",{style:{color:"black"}},N()(e.orderDate).format("YYYY/MM/DD")),O("td",{style:{color:l(null===e||void 0===e?void 0:e.shippingStatus)}},null===e||void 0===e?void 0:e.shippingStatus),O("td",{style:{color:"black"}},O("div",{className:"price-box"},O(o.Fragment,null,O("span",{className:"product-price"},"OMR "+e.sellingPrice+(null===e||void 0===e?void 0:e.shippingCharge))))),"DELIVERED"!==(null===e||void 0===e?void 0:e.shippingStatus)&&"SHIPPED"!==(null===e||void 0===e?void 0:e.shippingStatus)&&"CANCELED"!==(null===e||void 0===e?void 0:e.shippingStatus)?O("td",{className:"action"},O("button",{className:"btn btn-quickview mt-1 mt-md-0",title:"Quick View",style:{border:"1px solid"},onClick:function(t){t.preventDefault(),_(e._id)}},"Cancel")):O("td",{className:"action"},O("button",{className:"btn btn-quickview mt-1 mt-md-0",title:"Quick View",style:{border:"1px solid",display:"none"},disabled:!0},"Cancel")),(null===e||void 0===e?void 0:e.invoice)&&O("td",{className:"action"},O("button",{className:"btn btn-dark btn-add-cart product-type-simple btn-shop",title:"Quick View",style:{border:"1px solid"},onClick:function(t){t.preventDefault(),P(e._id)}},"Download Invoice")))})))))))})))},1677:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pages/orders",function(){return r(3021)}])}},function(e){e.O(0,[9774,2888,179],(function(){return t=1677,e(e.s=t);var t}));var t=e.O();_N_E=t}]);