(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2732],{9592:function(e,n,r){"use strict";var t=r(809),i=r.n(t),o=r(6265),a=r(2447),s=r(4121),l=r(7261),u=r(7294),d=r(2439),c=r(3331),p=r(6058),m=r(4718),v=r(1919),g=r(2132),f=r(1163),h=u.createElement;function b(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function y(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?b(Object(r),!0).forEach((function(n){(0,o.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function N(){var e=(0,l.Z)(["mutation EditUserShippingAddress($input: UserEditShippingAddressInput!) {\n    editUserShippingAddress(input: $input) {\n      _id\n    }\n  }"]);return N=function(){return e},e}function x(){var e=(0,l.Z)(["query GetUserShippingAddress($input: GetUserShippingAddressInput!) {\n    getUserShippingAddress(input: $input) {\n      _id\n      apartment\n      city\n      \n      country\n      email\n      firstname\n      houseNumber\n      mobile\n      postCode\n      streetName\n      suite\n      unit\n     \n    }\n  }"]);return x=function(){return e},e}function S(){var e=(0,l.Z)(["mutation CreateUserShippingAddress($input: UserCreateShippingAddressInput!) {\n    createUserShippingAddress(input: $input) {\n      _id\n    }\n  }"]);return S=function(){return e},e}var C=(0,p.Ps)(S()),A=(0,p.Ps)(x()),w=(0,p.Ps)(N());n.ZP=(0,c.Z)({ssr:!1})((function(e){var n,r,t,o,l,c,p=e.isEdit,b=e.addressId,N=e.onClose;(0,f.useRouter)(),console.log(p,b);var x=(0,m.a)(A,{variables:{input:{_id:b}}}),S=x.data;x.loading,x.error,console.log(S);var P=(0,d.cI)({defaultValues:{firstname:"",country:"",streetName:"",houseNumber:"",city:"",postCode:"",apartment:"",email:"",mobile:""}}),U=(P.register,P.handleSubmit),O=(P.watch,P.setValue),k=P.reset,E=P.formState.errors,D=P.control;(0,u.useEffect)((function(){var e,n,r,t,i,o,a,s,l;p&&(O("firstname",null===S||void 0===S||null===(e=S.getUserShippingAddress)||void 0===e?void 0:e.firstname),O("country",null===S||void 0===S||null===(n=S.getUserShippingAddress)||void 0===n?void 0:n.country),O("houseNumber",null===S||void 0===S||null===(r=S.getUserShippingAddress)||void 0===r?void 0:r.houseNumber),O("streetName",null===S||void 0===S||null===(t=S.getUserShippingAddress)||void 0===t?void 0:t.streetName),O("city",null===S||void 0===S||null===(i=S.getUserShippingAddress)||void 0===i?void 0:i.city),O("postCode",null===S||void 0===S||null===(o=S.getUserShippingAddress)||void 0===o?void 0:o.postCode),O("mobile",null===S||void 0===S||null===(a=S.getUserShippingAddress)||void 0===a?void 0:a.mobile),O("email",null===S||void 0===S||null===(s=S.getUserShippingAddress)||void 0===s?void 0:s.email),O("apartment",null===S||void 0===S||null===(l=S.getUserShippingAddress)||void 0===l?void 0:l.apartment))}),[p,S]);var q=(0,v.D)(C),_=(0,s.Z)(q,1)[0],Z=(0,v.D)(w),T=(0,s.Z)(Z,1)[0],j=function(){var e=(0,a.Z)(i().mark((function e(n){var r,t,o,a,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),event.preventDefault(),e.prev=2,!p){e.next=11;break}return e.next=6,T({variables:{input:y({_id:null===S||void 0===S||null===(r=S.getUserShippingAddress)||void 0===r?void 0:r._id},n)}});case 6:t=e.sent,console.log(t),t&&(g.Am.success(h("div",{style:{padding:"10px"}},"Shipping address updated")),N()),e.next=16;break;case 11:return e.next=13,_({variables:{input:y({},n)}});case 13:o=e.sent,console.log(o),o&&(null===(a=localStorage)||void 0===a||a.setItem("shippingId",null===o||void 0===o||null===(s=o.data)||void 0===s||null===(l=s.createUserShippingAddress)||void 0===l?void 0:l._id),(0,g.Am)(h("div",{style:{padding:"10px"}},"Shipping address added")),N(),k());case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.log("error",e.t0);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(n){return e.apply(this,arguments)}}(),F={city:{required:"City is required"},firstname:{required:"First Name is required"},houseNumber:{required:"HouseNumber is required"},mobile:{required:"Mobile is required"},postCode:{required:"postCode is required"},streetName:{required:"Street Name is required"},email:{pattern:{value:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,message:"Invalid email address"}}};return h("div",null,h("div",{className:"container checkout-container"},h("div",{className:"row"},h("div",{className:"col-lg-12"},h("ul",{className:"checkout-steps"},h("li",null,h("div",{className:"container custom-formspace"},h("h4",{className:"step-title"},"Shipping address")),h("form",{onSubmit:U(j),id:"checkout-form",style:{marginTop:"40px"}},h("div",{className:"form-group"},h("label",{style:{fontFamily:"Poppins",fontWeight:"400px",lineHeight:"20px"}},"First name"," ",h("ab",{className:"required",title:"required"},"*")),h(d.Qr,{control:D,name:"firstname",render:function(e){var n=e.field,r=n.onChange,t=n.value;return h("input",{type:"text",className:"form-control",value:t,onChange:r,style:{marginTop:"10px"}})},rules:F.firstname}),null!==E&&void 0!==E&&E.firstname?h("div",{style:{color:"red",fontWeight:"300"}},null===E||void 0===E||null===(n=E.firstname)||void 0===n?void 0:n.message):null),h("div",{className:"form-group"},h("label",{style:{fontFamily:"Poppins",fontWeight:"400px",lineHeight:"20px"}},"Country / Region "," "),h(d.Qr,{control:D,name:"country",render:function(e){var n=e.field,r=n.onChange,t=n.value;return h("input",{type:"text",className:"form-control",value:t,onChange:r,style:{marginTop:"10px"}})}})),h("div",{className:"form-group"},h("label",null,"Street address ",h("span",{className:"required"},"*")),h(d.Qr,{control:D,name:"houseNumber",render:function(e){var n=e.field,r=n.onChange,t=n.value;return h("input",{type:"text",className:"form-control",placeholder:"House number and street name",value:t,onChange:r,style:{marginTop:"10px"}})},rules:F.houseNumber}),null!==E&&void 0!==E&&E.houseNumber?h("div",{style:{color:"red",fontWeight:"300"}},null===E||void 0===E||null===(r=E.houseNumber)||void 0===r?void 0:r.message):null,h(d.Qr,{control:D,name:"streetName",render:function(e){var n=e.field,r=n.onChange,t=n.value;return h("input",{type:"text",className:"form-control",placeholder:"Apartment, suite, unit, etc. (optional)",value:t,onChange:r})},rules:F.streetName}),null!==E&&void 0!==E&&E.streetName?h("div",{style:{color:"red",fontWeight:"300"}},null===E||void 0===E||null===(t=E.streetName)||void 0===t?void 0:t.message):null),h("div",{className:"form-group"},h("label",null,"Twon/City ",h("span",{className:"required"},"*")),h(d.Qr,{control:D,name:"city",render:function(e){var n=e.field,r=n.onChange,t=n.value;return h("input",{type:"text",className:"form-control",placeholder:"Abu Dhabi",value:t,onChange:r,style:{marginTop:"10px"}})},rules:F.city}),null!==E&&void 0!==E&&E.city?h("div",{style:{color:"red",fontWeight:"300"}},null===E||void 0===E||null===(o=E.city)||void 0===o?void 0:o.message):null),h("div",{className:"form-group"},h("label",null,"Pincode/Zip ",h("span",{className:"required"},"*")),h(d.Qr,{control:D,name:"postCode",render:function(e){var n=e.field,r=n.onChange,t=n.value;return h("input",{type:"number",className:"form-control",placeholder:"6730016",value:t,onChange:r,style:{marginTop:"10px"}})},rules:F.postCode}),null!==E&&void 0!==E&&E.postCode?h("div",{style:{color:"red",fontWeight:"300"}},null===E||void 0===E||null===(l=E.postCode)||void 0===l?void 0:l.message):null),h("div",{className:"form-group"},h("label",null,"Phone",h("span",{className:"required"},"*")),h("div",{className:"input-group",style:{marginTop:"10px"}},h("div",{className:"input-group-prepend"},h("span",{className:"input-group-text",style:{padding:"10px"}},h("img",{src:"images\\brands\\flag1.svg",alt:"Flag",width:"24",height:"16"}),"+971")),h(d.Qr,{control:D,name:"mobile",render:function(e){var n=e.field,r=n.onChange,t=n.value;return h("input",{type:"tel",className:"form-control",placeholder:"Enter your phone number",value:t,onChange:r})},rules:F.mobile})),null!==E&&void 0!==E&&E.mobile?h("div",{style:{color:"red",fontWeight:"300"}},null===E||void 0===E||null===(c=E.city)||void 0===c?void 0:c.mobile):null),h("div",{className:"form-group"},h("label",null,"Email"),h(d.Qr,{control:D,name:"email",render:function(e){var n=e.field,r=n.onChange,t=n.value;return h("input",{type:"text",className:"form-control",value:t,onChange:r,style:{marginTop:"10px"}})}})),h("div",{className:"container",style:{display:"flex",justifyContent:"flex-end"}},h("div",{className:"mt-3"},h("button",{type:"submit",className:"btn btn-dark mr-0"},"Save changes"))))))))))}))},3252:function(e,n,r){"use strict";r.r(n),r.d(n,{DEFAULT_ADDRESS:function(){return q},GET_ADDRESSES:function(){return E},REMOVE_ADDRESS:function(){return D},default:function(){return _}});var t=r(809),i=r.n(t),o=r(2447),a=r(4121),s=r(7261),l=r(7294),u=(r(8216),r(8974)),d=r(6265),c=r(2439),p=r(3331),m=r(6058),v=r(1919),g=l.createElement;function f(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function h(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?f(Object(r),!0).forEach((function(n){(0,d.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function b(){var e=(0,s.Z)(["query Query($input: userInput!) {\n    getUserRecord(input: $input) {\n      message\n      record {\n        displayName\n        lastName\n        _id\n        address\n        city\n        country\n        countryCode\n        email\n        firstName\n        houseNumber\n        mobileNumber\n        pincode\n        streetName\n        token\n      }\n    }\n  }"]);return b=function(){return e},e}function y(){var e=(0,s.Z)(["mutation UpdateUserProfile($input: updateUserProfileInput!) {\n    updateUserProfile(input: $input) {\n\n      message\n    }\n  }"]);return y=function(){return e},e}var N=(0,m.Ps)(y());(0,m.Ps)(b());var x=(0,p.Z)({ssr:!1})((function(){var e=(0,c.cI)({defaultValues:{firstName:"",lastName:"",email:"",mobileNumber:"",pincode:"",city:"",streetName:"",houseNumber:"",country:""}}),n=(e.register,e.handleSubmit),r=(e.watch,e.setValue,e.reset),t=(e.formState.errors,e.control),s=(0,v.D)(N),l=(0,a.Z)(s,1)[0],u=function(){var e=(0,o.Z)(i().mark((function e(n){var t,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),event.preventDefault(),e.prev=2,"65bb85834825212140ac3aed",e.next=6,l({variables:{input:h({_id:"65bb85834825212140ac3aed".toString()},n)}});case 6:t=e.sent,console.log(t),t&&(window.alert(null===t||void 0===t||null===(o=t.data)||void 0===o||null===(a=o.updateUserProfile)||void 0===a?void 0:a.message),r()),SetIsOtp(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("error",e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}();return g("div",null,g("div",{className:"container checkout-container"},g("div",{className:"row"},g("div",{className:"col-lg-12"},g("ul",{className:"checkout-steps"},g("li",null,g("div",{className:"container",style:{marginTop:"6rem",padding:"2px"}},g("h4",{className:"step-title"},"Billing address")),g("form",{onSubmit:n(u),id:"checkout-form",style:{marginTop:"40px"}},g("div",{className:"row"},g("div",{className:"col-md-6"},g("div",{className:"form-group"},g("label",{style:{fontFamily:"Poppins",fontWeight:"400px",lineHeight:"20px"}},"First name"," ",g("ab",{className:"required",title:"required"},"*")),g(c.Qr,{control:t,name:"firstName",render:function(e){var n=e.field,r=n.onChange,t=n.value;return g("input",{type:"text",className:"form-control",value:t,onChange:r,style:{marginTop:"10px"}})}}))),g("div",{className:"col-md-6"},g("div",{className:"form-group"},g("label",{style:{fontFamily:"Poppins",fontWeight:"400px",lineHeight:"20px"}},"Last name"," ",g("ab",{className:"required",title:"required"},"*")),g(c.Qr,{control:t,name:"lastName",render:function(e){var n=e.field,r=n.onChange,t=n.value;return g("input",{type:"text",className:"form-control",style:{marginTop:"10px"},value:t,onChange:r})}})))),g("div",{className:"form-group"},g("label",{style:{fontFamily:"Poppins",fontWeight:"400px",lineHeight:"20px"}},"Country / Region "," ",g("ab",{className:"required",title:"required"},"*")),g(c.Qr,{control:t,name:"country",render:function(e){var n=e.field,r=n.onChange,t=n.value;return g("input",{type:"text",className:"form-control",value:t,onChange:r,style:{marginTop:"10px"}})}})),g("div",{className:"form-group"},g("label",null,"Street address ",g("span",{className:"required"},"*")),g(c.Qr,{control:t,name:"houseNumber",render:function(e){var n=e.field,r=n.onChange,t=n.value;return g("input",{type:"text",className:"form-control",placeholder:"House number and street name",value:t,onChange:r,style:{marginTop:"10px"}})}}),g(c.Qr,{control:t,name:"streetName",render:function(e){var n=e.field,r=n.onChange,t=n.value;return g("input",{type:"text",className:"form-control",placeholder:"Apartment, suite, unit, etc. (optional)",value:t,onChange:r})}})),g("div",{className:"form-group"},g("label",null,"Twon/City ",g("span",{className:"required"},"*")),g(c.Qr,{control:t,name:"city",render:function(e){var n=e.field,r=n.onChange,t=n.value;return g("input",{type:"text",className:"form-control",placeholder:"Abu Dhabi",value:t,onChange:r,style:{marginTop:"10px"}})}})),g("div",{className:"form-group"},g("label",null,"Pincode/Zip ",g("span",{className:"required"},"*")),g(c.Qr,{control:t,name:"pincode",render:function(e){var n=e.field,r=n.onChange,t=n.value;return g("input",{type:"number",className:"form-control",placeholder:"6730016",value:t,onChange:r,style:{marginTop:"10px"}})}})),g("div",{className:"form-group"},g("label",null,"Phone",g("span",{className:"required"},"*")),g("div",{className:"input-group",style:{marginTop:"10px"}},g("div",{className:"input-group-prepend"},g("span",{className:"input-group-text",style:{padding:"10px"}},g("img",{src:"images\\brands\\flag1.svg",alt:"Flag",width:"24",height:"16"}),"+971")),g(c.Qr,{control:t,name:"mobileNumber",render:function(e){var n=e.field,r=n.onChange,t=n.value;return g("input",{type:"tel",className:"form-control",placeholder:"Enter your phone number",value:t,onChange:r})}}))),g("div",{className:"form-group"},g("label",null,"Email",g("span",{className:"required"},"*")),g(c.Qr,{control:t,name:"email",render:function(e){var n=e.field,r=n.onChange,t=n.value;return g("input",{type:"text",className:"form-control",value:t,onChange:r,style:{marginTop:"10px"}})}})),g("div",{className:"container",style:{display:"flex",justifyContent:"flex-end"}},g("div",{className:"mt-3"},g("button",{type:"submit",className:"btn btn-dark mr-0"},"Save changes"))))))))))})),S=r(9592),C=r(4718),A=r(471),w=r(2132),P=l.createElement;function U(){var e=(0,s.Z)(["mutation UpdateUserShippingAddressAsDefault($input: updateUserShippingAddressAsDefaultInput!) {\n  updateUserShippingAddressAsDefault(input: $input) {\n    _id\n    message\n  }\n}"]);return U=function(){return e},e}function O(){var e=(0,s.Z)(["mutation RemoveUserShippingAddress($input: UserRemoveShippingAddressInput!) {\n  removeUserShippingAddress(input: $input) {\n    _id\n    message\n  }\n}"]);return O=function(){return e},e}function k(){var e=(0,s.Z)(["query GetUserShippingAddresses {\n  getUserShippingAddresses {\n    address {\n      _id\n      apartment\n      city\n     \n      country\n      email\n      firstname\n      houseNumber\n      mobile\n      postCode\n      streetName\n      suite\n      unit\n      isDefault\n     \n    }\n  }\n}"]);return k=function(){return e},e}var E=(0,m.Ps)(k()),D=(0,m.Ps)(O()),q=(0,m.Ps)(U());var _=(0,p.Z)({ssr:!1})((function(){var e,n,r,t,s=(0,l.useState)(!1),d=s[0],c=(s[1],(0,l.useState)(!1)),p=c[0],m=c[1],g=(0,C.a)(E),f=g.data,h=(g.loading,g.error,g.refetch),b=(0,l.useState)(!1),y=b[0],N=b[1],U=(0,l.useState)(null),O=U[0],k=U[1],_=(0,l.useState)(!1),Z=(_[0],_[1],(0,v.D)(D)),T=(0,a.Z)(Z,1)[0],j=(0,v.D)(q),F=(0,a.Z)(j,1)[0];console.log(f),console.log(null===f||void 0===f||null===(e=f.getUserShippingAddresses)||void 0===e||null===(n=e.address)||void 0===n?void 0:n.isDefault),(0,l.useEffect)((function(){h()}),[]);var Q=function(){var e=(0,o.Z)(i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,T({variables:{input:{_id:n}}});case 3:r=e.sent,console.log(r),h();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),I=function(){var e=(0,o.Z)(i().mark((function e(n){var r,t,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({variables:{input:{addressId:n}}});case 2:o=e.sent,console.log(o),h(),w.Am.success(null===o||void 0===o||null===(r=o.data)||void 0===r||null===(t=r.updateUserShippingAddressAsDefault)||void 0===t?void 0:t.message);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return P("main",{className:"main main-test"},P("nav",{"aria-label":"breadcrumb",className:"breadcrumb-nav"},P("div",{className:"container"},P("ol",{className:"breadcrumb"},P("li",{className:"breadcrumb-item"},P(u.Z,{href:"/"},"Home")),P("li",{className:"breadcrumb-item active","aria-current":"page"},"addresses")))),P("div",{className:" d-flex flex-column align-items-center",style:{backgroundColor:"#F9F9F9",marginTop:"10px"}},P("ul",{className:"checkout-progress-bar d-flex justify-content-center flex-wrap mb-0"},P("li",{className:""},P(u.Z,{href:"/pages/account"},"My Account")),P("li",{className:"active"},P(u.Z,{href:"/pages/orders"},"Addresses")))),P("div",{className:"container",style:{marginTop:"3rem",borderBottom:"1px solid",borderColor:"#E2E2E2",padding:"2px"}},P("h2",{className:"step-title addresstitle"},"Address")),P(l.Fragment,null,d?P(x,null):p?P(S.ZP,{isEdit:y,addressId:O,onClose:function(){console.log("click"),m(!1),h()}}):P("div",{className:"container d-flex justify-content-between flex-column flex-sm-row w-sm-100",style:{gap:"5rem",marginBottom:"75px"}},P("div",{className:"custom-addressbox"},P("div",{className:"p-5"},P("h4",{style:{fontFamily:"Poppins",fontWeight:"600px",fontSize:"24px",lineHeight:"20px"}},"Shipping Addresses"),f&&(null===f||void 0===f||null===(r=f.getUserShippingAddresses)||void 0===r?void 0:r.address.length)>0?null===f||void 0===f||null===(t=f.getUserShippingAddresses)||void 0===t?void 0:t.address.map((function(e,n){var r;return P(l.Fragment,null,P("div",{key:n,style:{padding:"20px 0",display:"flex",lineHeight:"19px"}},P(A.Aph,{style:{fontSize:"40px",color:"#E30613",paddingRight:"20px"}}),P("div",null,P("span",null,null===e||void 0===e?void 0:e.firstname),P("br",null),P("span",null,null===e||void 0===e?void 0:e.houseNumber,", ",null===e||void 0===e?void 0:e.streetName),P("br",null),P("span",null,"PostCode:\xa0",null===e||void 0===e?void 0:e.postCode),P("br",null),P("span",null,null===e||void 0===e?void 0:e.city,", ",null===e||void 0===e?void 0:e.country),P("div",{style:{display:"flex",gap:"35px",color:"black",marginTop:"10px"}},P("button",{className:"editbtn",style:{cursor:"pointer",background:"none",border:"none",fontWeight:"600",color:"black !important"},onClick:function(){m(!0),N(!0),k(null===e||void 0===e?void 0:e._id)}},"Edit"),f&&(null===f||void 0===f||null===(r=f.getUserShippingAddresses)||void 0===r?void 0:r.address.length)>1&&P("button",{className:"editbtn",style:{cursor:"pointer",background:"none",border:"none",fontWeight:"600"},onClick:function(){return Q(null===e||void 0===e?void 0:e._id)}},"Remove"),!e.isDefault&&P("button",{style:{cursor:"pointer",background:"none",border:"none",fontWeight:"600"},onClick:function(){return I(null===e||void 0===e?void 0:e._id)}},"Set as default")))))})):P("p",{style:{fontFamily:"Poppins",fontWeight:"400px",fontSize:"14px",lineHeight:"20px"}},"You have not set up this type of address yet."),P("button",{type:"submit",className:"btn  mr-0",style:{border:"1px solid ",marginTop:"20px",width:"152px",height:"43px",padding:"10px",background:"white"},onClick:function(){m(!0)}},"ADD ADDRESSES"))))))}))},1550:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pages/addresses",function(){return r(3252)}])}},function(e){e.O(0,[955,2439,9774,2888,179],(function(){return n=1550,e(e.s=n);var n}));var n=e.O();_N_E=n}]);