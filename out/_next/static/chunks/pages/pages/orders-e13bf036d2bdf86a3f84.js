(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8617],{7484:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",a="second",s="minute",i="hour",c="day",u="week",o="month",l="quarter",d="year",f="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},b={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),a=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(a,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(n,o),s=r-a<0,i=t.clone().add(n+(s?-1:1),o);return+(-(n+(r-a)/(s?a-i:i-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:o,y:d,w:u,d:c,D:f,h:i,m:s,s:a,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",$={};$[y]=g;var w="$isDayjsObject",N=function(e){return e instanceof M||!(!e||!e[w])},O=function e(t,r,n){var a;if(!t)return y;if("string"==typeof t){var s=t.toLowerCase();$[s]&&(a=s),r&&($[s]=r,a=s);var i=t.split("-");if(!a&&i.length>1)return e(i[0])}else{var c=t.name;$[c]=t,a=c}return!n&&a&&(y=a),a||!n&&y},D=function(e,t){if(N(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new M(r)},S=b;S.l=O,S.i=N,S.w=function(e,t){return D(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var M=function(){function g(e){this.$L=O(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var v=g.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var a=n[2]-1||0,s=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return S},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(e,t){var r=D(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return D(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<D(e)},v.$g=function(e,t,r){return S.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,n=!!S.u(t)||t,l=S.p(e),h=function(e,t){var a=S.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?a:a.endOf(c)},p=function(e,t){return S.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},m=this.$W,g=this.$M,v=this.$D,b="set"+(this.$u?"UTC":"");switch(l){case d:return n?h(1,0):h(31,11);case o:return n?h(1,g):h(0,g+1);case u:var y=this.$locale().weekStart||0,$=(m<y?m+7:m)-y;return h(n?v-$:v+(6-$),g);case c:case f:return p(b+"Hours",0);case i:return p(b+"Minutes",1);case s:return p(b+"Seconds",2);case a:return p(b+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,u=S.p(e),l="set"+(this.$u?"UTC":""),h=(r={},r[c]=l+"Date",r[f]=l+"Date",r[o]=l+"Month",r[d]=l+"FullYear",r[i]=l+"Hours",r[s]=l+"Minutes",r[a]=l+"Seconds",r[n]=l+"Milliseconds",r)[u],p=u===c?this.$D+(t-this.$W):t;if(u===o||u===d){var m=this.clone().set(f,1);m.$d[h](p),m.init(),this.$d=m.set(f,Math.min(this.$D,m.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[S.p(e)]()},v.add=function(n,l){var f,h=this;n=Number(n);var p=S.p(l),m=function(e){var t=D(h);return S.w(t.date(t.date()+Math.round(e*n)),h)};if(p===o)return this.set(o,this.$M+n);if(p===d)return this.set(d,this.$y+n);if(p===c)return m(1);if(p===u)return m(7);var g=(f={},f[s]=t,f[i]=r,f[a]=e,f)[p]||1,v=this.$d.getTime()+n*g;return S.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=e||"YYYY-MM-DDTHH:mm:ssZ",a=S.z(this),s=this.$H,i=this.$m,c=this.$M,u=r.weekdays,o=r.months,l=r.meridiem,d=function(e,r,a,s){return e&&(e[r]||e(t,n))||a[r].slice(0,s)},f=function(e){return S.s(s%12||12,e,"0")},p=l||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(m,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return c+1;case"MM":return S.s(c+1,2,"0");case"MMM":return d(r.monthsShort,c,o,3);case"MMMM":return d(o,c);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,u,2);case"ddd":return d(r.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(s);case"HH":return S.s(s,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return p(s,i,!0);case"A":return p(s,i,!1);case"m":return String(i);case"mm":return S.s(i,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return a}return null}(e)||a.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,f,h){var p,m=this,g=S.p(f),v=D(n),b=(v.utcOffset()-this.utcOffset())*t,y=this-v,$=function(){return S.m(m,v)};switch(g){case d:p=$()/12;break;case o:p=$();break;case l:p=$()/3;break;case u:p=(y-b)/6048e5;break;case c:p=(y-b)/864e5;break;case i:p=y/r;break;case s:p=y/t;break;case a:p=y/e;break;default:p=y}return h?p:S.a(p)},v.daysInMonth=function(){return this.endOf(o).$D},v.$locale=function(){return $[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=O(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return S.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),k=M.prototype;return D.prototype=k,[["$ms",n],["$s",a],["$m",s],["$H",i],["$W",c],["$M",o],["$y",d],["$D",f]].forEach((function(e){k[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),D.extend=function(e,t){return e.$i||(e(t,M,D),e.$i=!0),D},D.locale=O,D.isDayjs=N,D.unix=function(e){return D(1e3*e)},D.en=$[y],D.Ls=$,D.p={},D}()},2078:function(e,t,r){"use strict";var n=r(6265),a=r(1163),s=r(7294),i=r(8974),c=s.createElement;function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e){for(var t=e.totalPage,r=(0,a.useRouter)().query,n=r.page?parseInt(r.page):0,u=[],l=0;l<Math.min(t,3);l++)n<3||n>t-3?(n<3&&(u[l]=l+1),t>3&&n>t-3&&(u[l]=t-2+l)):u[l]=n-1+l;return c(s.Fragment,null,t>1&&c("ul",{className:"pagination toolbox-item"},n>0&&c("li",{className:"page-item"},c(i.Z,{className:"page-link page-link-btn",href:{query:o(o({},r),{},{page:n-1})},scroll:!1},c("i",{className:"icon-angle-left"}))),u.map((function(e){return c("li",{className:"page-item ".concat(n===e-1?"active":""),key:"page-".concat(e)},c(i.Z,{className:"page-link",href:{query:o(o({},r),{},{page:e-1})},scroll:!1},e,n===e-1&&c("span",{className:"sr-only"},"(current)")))})),n<t-1&&c("li",{className:"page-item"},c(i.Z,{className:"page-link page-link-btn",href:{query:o(o({},r),{},{page:n+1})},scroll:!1},c("i",{className:"icon-angle-right"})))))}t.Z=s.memo(l)},3021:function(e,t,r){"use strict";r.r(t);var n=r(6265),a=r(809),s=r.n(a),i=r(2447),c=r(4121),u=r(7261),o=r(7294),l=r(8216),d=r(2679),f=r(8974),h=r(2132),p=r(5708),m=r(2806),g=r(6723),v=r(1649),b=r(9710),y=r(1919),$=r(4931),w=r(2559),N=r(7484),O=r.n(N),D=r(4593),S=r(2078),M=r(1163),k=o.createElement;function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(){var e=(0,u.Z)(["\n  mutation GetUserIvoiceSignedUrl($input: GetUserIvoiceUrlInput!) {\n    getUserIvoiceSignedUrl(input: $input) {\n      url\n    }\n  }\n"]);return x=function(){return e},e}function I(){var e=(0,u.Z)(["\n  mutation CancelUserOrderProduct($input: CancelUserOrderProductInput!) {\n    cancelUserOrderProduct(input: $input) {\n      _id\n    }\n  }\n"]);return I=function(){return e},e}function j(){var e=(0,u.Z)(["\n  query GetUserOrderProducts($input: GetUserOrderProductsInput!) {\n    getUserOrderProducts(input: $input) {\n      maxRecords\n      records {\n        _id\n        productId\n        vendorId\n        orderId\n        itemId\n        productName\n        shortDescription\n        skuId\n        image {\n          fileType\n          fileURL\n          mimeType\n          originalName\n        }\n        returnPeriod\n        mrp\n        sellingPrice\n        shippingCharge\n        paymentMode\n        paymentStatus\n        orderDate\n        shippingStatus\n        shippedDate\n        deliveryDate\n        returnStatus\n        returnDate\n        returnRequestDate\n        returnRejectedDate\n        returnUserReason\n        refundStatus\n        refundAmount\n        refundDate\n        cancelledDate\n        cancelUserReason\n        courierId\n        invoiceNumber\n        invoice {\n          fileType\n          fileURL\n          mimeType\n          originalName\n        }\n      }\n    }\n  }\n"]);return j=function(){return e},e}var E=(0,b.Ps)(j()),U=(0,b.Ps)(I()),Z=(0,b.Ps)(x());t.default=(0,w.Z)({ssr:!1})((0,l.$j)((function(e){return{wishlist:e.wishlist.list?e.wishlist.list:[]}}),_(_(_({},p.Nw),m.Nw),g.Nw))((function(e){e.wishlist,e.addToCart,e.removeFromWishlist,e.showQuickView;var t,r,n=(0,o.useState)(0),a=n[0],u=(n[1],(0,o.useState)([])),l=u[0],p=u[1],m=(0,M.useRouter)(),g=m.query.page?parseInt(m.query.page):0,b=(0,o.useState)(5),w=b[0],N=(b[1],function(e){switch(e){case"PENDING":case"IN_PROGRESS":return"#FFA500";case"COMPLETED":return"#44961D";default:return"#000000"}}),P=(0,y.D)(U),_=(0,c.Z)(P,1)[0],x=(0,y.D)(Z),I=(0,c.Z)(x,1)[0],j=(0,$.a)(E,{variables:{input:{page:g||0,size:w}}}),C=j.data,T=j.loading,Y=j.error,L=j.refetch,R=C?parseInt((null===C||void 0===C||null===(t=C.getUserOrderProducts)||void 0===t?void 0:t.maxRecords)/w)+((null===C||void 0===C||null===(r=C.getUserOrderProducts)||void 0===r?void 0:r.maxRecords)%w?1:0):0;(0,o.useEffect)((function(){Y?console.error("Error fetching orders:",Y):C&&p(C.getUserOrderProducts.records||[])}),[C,Y]);var F=function(){var e=(0,i.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_({variables:{input:{_id:t}}});case 3:e.sent,L(),h.Am.success(k("div",{style:{padding:"10px"}},"Your order has been canceled.")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=(0,i.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I({variables:{input:{_id:t}}});case 3:r=e.sent,n=r.data.getUserIvoiceSignedUrl.url,window.open(n,"_blank"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h.Am.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return k(o.Fragment,null,k(D.q,null,k("title",null,"Orders | Arab Deals")),k("main",{className:"main"},k("div",{className:"container"},k("nav",{"aria-label":"breadcrumb",className:"breadcrumb-nav"},k("div",{className:"container"},k("ol",{className:"breadcrumb"},k("li",{className:"breadcrumb-item"},k(f.Z,{href:"/"},k(v.QO$,{style:{fontSize:"16px"}}))),k("li",{className:"breadcrumb-item active","aria-current":"page"},k(f.Z,{href:"/pages/account"},"My account")),k("li",{className:"breadcrumb-item active","aria-current":"page"},k(f.Z,{className:"activeitem",href:"/pages/orders"},"Orders")))))),k("div",{className:" d-flex flex-column align-items-center"},k("ul",{className:"checkout-progress-bar d-flex justify-content-center flex-wrap",style:{backgroundColor:"#F9F9F9",width:"100%"}},k("li",{className:""},k(f.Z,{href:"/pages/account"},"My Account")),k("li",{className:"active"},k(f.Z,{href:"/pages/orders"},"Orders")))),k("div",{className:"container",style:{marginTop:"2rem",borderBottom:"1px solid",borderColor:"#E2E2E2"}},k("h4",null,"Orders")),k("div",{className:"container",style:{}},k("div",{className:"success-alert"},1===a?k("p",null,"Product successfully removed."):"",2===a?k("p",null,"Product added to cart successfully."):""),0===l.length?k("div",{className:"wishlist-table-container"},k("div",{className:"table table-wishlist mb-0"},k("div",{className:"wishlist-empty-page text-center"},k("i",{class:"fa fa-shopping-bag","aria-hidden":"true"}),k("p",null,"No products Ordered"),k(f.Z,{href:"/shop",className:"btn btn-dark btn-add-cart product-type-simple btn-shop font1 w-auto"},"go shop"," ")))):k("div",{className:"wishlist-table-container"},k("table",{className:"table table-wishlist mb-0"},k("thead",null,k("tr",null,k("th",{className:"thumbnail-col"},"Product"),k("th",{className:"status-col"}),k("th",{className:"status-col"},"Order Id"),k("th",{className:"status-col"},"Date"),k("th",{className:"status-col"},"Status"),k("th",{className:"price-col"},"Total Price"),k("th",{className:"action-col"},"Actions"))),k("tbody",null,l.map((function(e,t){return k("tr",{key:"wishlist-item"+t,className:"product-row"},k("td",{className:"media-with-lazy"},k("figure",{className:"product-image-container"},k(f.Z,{href:"/product/default/".concat(e.productId),className:"product-image"},k(d.LazyLoadImage,{alt:"product",src:e.image.fileURL,threshold:500,width:"80",height:"80"})))),k("td",null,k("h5",{className:"product-title"},k(f.Z,{href:"/product/default/".concat(e.productId)},e.productName))),k("td",{style:{color:"black"}},e.orderId),k("td",{style:{color:"black"}},O()(e.orderDate).format("YYYY/MM/DD")),k("td",{style:{color:N(null===e||void 0===e?void 0:e.shippingStatus)}},null===e||void 0===e?void 0:e.shippingStatus),k("td",{style:{color:"black"}},k("div",{className:"price-box"},k(o.Fragment,null,k("span",{className:"product-price"},"OMR"," ",parseFloat(Number(e.sellingPrice)+Number(null===e||void 0===e?void 0:e.shippingCharge)).toFixed(2))))),"DELIVERED"!==(null===e||void 0===e?void 0:e.shippingStatus)&&"SHIPPED"!==(null===e||void 0===e?void 0:e.shippingStatus)&&"CANCELED"!==(null===e||void 0===e?void 0:e.shippingStatus)?k("td",{className:"action"},k("button",{className:"btn btn-quickview mt-1 mt-md-0",title:"Quick View",style:{border:"1px solid"},onClick:function(t){t.preventDefault(),F(e._id)}},"Cancel")):k(o.Fragment,null,null!==e&&void 0!==e&&e.invoice?k("td",{className:"action"},k("button",{className:"btn btn-dark ",title:"Quick View",style:{border:"1px solid"},onClick:function(t){t.preventDefault(),H(e._id)}},k("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",style:{marginRight:"5px"}},k("path",{fill:"white",d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),"Invoice")):k("td",{className:"action"},k("button",{className:"btn btn-quickview mt-1 mt-md-0",title:"Quick View",style:{border:"1px solid",display:"none"},disabled:!0},"Cancel"))))})))),T||l&&l.length&&k("div",{className:"container"},k("nav",{className:"toolbox toolbox-pagination border-0"},k(S.Z,{totalPage:R})))))))})))},1677:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pages/orders",function(){return r(3021)}])}},function(e){e.O(0,[9774,2888,179],(function(){return t=1677,e(e.s=t);var t}));var t=e.O();_N_E=t}]);