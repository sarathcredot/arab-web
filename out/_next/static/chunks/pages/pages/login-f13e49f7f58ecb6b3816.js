(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8158],{3918:function(e,t,n){"use strict";n.r(t),n.d(t,{LOGIN:function(){return O},OTP_VERIFY:function(){return S},RESENT_OTP:function(){return _},default:function(){return T}});var r=n(1229),a=n(809),o=n.n(a),i=n(2447),s=n(4121),u=n(7261),l=n(7294),c=n(8974),p=function(e){return"object"===typeof e&&null!==e},d=function(e){var t=e.value,n=void 0===t?"":t,r=e.numInputs,a=void 0===r?4:r,o=e.onChange,i=e.onPaste,s=e.renderInput,u=e.shouldAutoFocus,c=void 0!==u&&u,d=e.inputType,m=void 0===d?"text":d,f=e.renderSeparator,v=e.placeholder,g=e.containerStyle,b=e.inputStyle,h=e.skipDefaultStyles,y=void 0!==h&&h,N=l.useState(0),x=N[0],k=N[1],w=l.useRef([]),O=function(){return n?n.toString().split(""):[]},S="number"===m||"tel"===m;l.useEffect((function(){w.current=w.current.slice(0,a)}),[a]),l.useEffect((function(){var e;c&&(null===(e=w.current[0])||void 0===e||e.focus())}),[c]);var _=function(){if("string"===typeof v){if(v.length===a)return v;v.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},T=function(e){return(S?!isNaN(Number(e)):"string"===typeof e)&&1===e.trim().length},D=function(e){var t=e.target.value;T(t)&&(A(t),L(x+1))},E=function(e){var t=e.nativeEvent;T(e.target.value)||(null===t.data&&"deleteContentBackward"===t.inputType&&(e.preventDefault(),A(""),L(x-1)),e.target.value="")},I=function(){k(x-1)},P=function(e){var t=O();[e.code,e.key].includes("Backspace")?(e.preventDefault(),A(""),L(x-1)):"Delete"===e.code?(e.preventDefault(),A("")):"ArrowLeft"===e.code?(e.preventDefault(),L(x-1)):"ArrowRight"===e.code||e.key===t[x]?(e.preventDefault(),L(x+1)):"Spacebar"!==e.code&&"Space"!==e.code&&"ArrowUp"!==e.code&&"ArrowDown"!==e.code||e.preventDefault()},L=function(e){var t,n,r=Math.max(Math.min(a-1,e),0);w.current[r]&&(null===(t=w.current[r])||void 0===t||t.focus(),null===(n=w.current[r])||void 0===n||n.select(),k(r))},A=function(e){var t=O();t[x]=e[0],Z(t)},Z=function(e){var t=e.join("");o(t)},C=function(e){var t;e.preventDefault();var n=O(),r=x,o=e.clipboardData.getData("text/plain").slice(0,a-x).split("");if(!S||!o.some((function(e){return isNaN(Number(e))}))){for(var i=0;i<a;++i)i>=x&&o.length>0&&(n[i]=null!==(t=o.shift())&&void 0!==t?t:"",r++);L(r),Z(n)}};return l.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},p(g)&&g),className:"string"===typeof g?g:void 0,onPaste:i},Array.from({length:a},(function(e,t){return t})).map((function(e){var t,n,r;return l.createElement(l.Fragment,{key:e},s({value:null!==(t=O()[e])&&void 0!==t?t:"",placeholder:null!==(r=null===(n=_())||void 0===n?void 0:n[e])&&void 0!==r?r:void 0,ref:function(t){return w.current[e]=t},onChange:D,onFocus:function(t){return function(e){return function(t){k(t),e.target.select()}}(t)(e)},onBlur:I,onKeyDown:P,onPaste:C,autoComplete:"off",maxLength:1,"aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(y?{}:{width:"1em",textAlign:"center"},p(b)?b:{}),className:"string"===typeof b?b:void 0,type:m,inputMode:S?"numeric":"text",onInput:E},e),e<a-1&&("function"===typeof f?f(e):f))})))},m=n(6058),f=n(1919),v=n(3331),g=n(1163),b=n(2132),h=n(1649),y=n(980),N=l.createElement;function x(){var e=(0,u.Z)(["mutation UserResendLoginOtp($input: userResendLoginOtpInput!) {\n  userResendLoginOtp(input: $input) {\n    message\n  }\n}"]);return x=function(){return e},e}function k(){var e=(0,u.Z)(["mutation UserVerifyOtp($input: userVerifyOtpInput!) {\n  userVerifyOtp(input: $input) {\n    message\n    token\n    userId\n  }\n}"]);return k=function(){return e},e}function w(){var e=(0,u.Z)(["\n  mutation Mutation($input: userLoginOtpInput!) {\n    userLoginOtp(input: $input) {\n      message\n      mobileNumber\n      _id\n    }\n  }\n"]);return w=function(){return e},e}var O=(0,m.Ps)(w()),S=(0,m.Ps)(k()),_=(0,m.Ps)(x());var T=(0,v.Z)({ssr:!1})((function(e){e.mutate;var t=(0,l.useState)(!1),n=t[0],a=t[1],u=(0,l.useState)(""),p=u[0],m=u[1],v=(0,l.useState)(""),x=v[0],k=v[1],w=(0,l.useState)(""),T=w[0],D=w[1],E=(0,l.useState)(""),I=E[0],P=E[1],L=(0,l.useState)(""),A=L[0],Z=L[1],C=(0,g.useRouter)(),R=(0,f.D)(O),B=(0,s.Z)(R,1)[0],F=(0,f.D)(S),V=(0,s.Z)(F,1)[0],W=(0,f.D)(_),$=(0,s.Z)(W,1)[0],M=function(){var e=(0,i.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,p.trim()){e.next=5;break}return k("Mobile number is required"),e.abrupt("return");case 5:return e.next=7,B({variables:{input:{mobileNumber:"+968 ".concat(p)}}});case 7:n=e.sent,console.log(n.data.userLoginOtp._id,"responsseeeeeeeeeeeeeee"),Z(n.data.userLoginOtp._id),b.Am.success(N("div",{style:{padding:"10px"}},"otp sent successfully")),a(!0),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("error",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,i.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("click"),e.prev=1,e.next=4,$({variables:{input:{mobileNumber:"+968 ".concat(p)}}});case 4:t=e.sent,console.log(t),t&&b.Am.success(N("div",{style:{padding:"10px"}},"otp sent successfully")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),b.Am.error(N("div",{style:{padding:"10px"}},null===e.t0||void 0===e.t0?void 0:e.t0.message)),console.log("error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,i.Z)(o().mark((function e(t){var n,r,a,i,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,I){e.next=5;break}return D("Otp is required"),e.abrupt("return");case 5:return e.next=7,V({variables:{input:{code:I,_id:A}}});case 7:if(n=e.sent,console.log(n),!n){e.next=19;break}if(localStorage.setItem("arabtoken",null===n||void 0===n||null===(r=n.data)||void 0===r||null===(a=r.userVerifyOtp)||void 0===a?void 0:a.token),localStorage.setItem("userId",null===n||void 0===n||null===(i=n.data)||void 0===i||null===(s=i.userVerifyOtp)||void 0===s?void 0:s.userId),C.push("/"),!(u=localStorage.getItem("historyUrl"))){e.next=18;break}return e.abrupt("return",C.push(u));case 18:return e.abrupt("return",C.push("/"));case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),console.log("error",e.t0);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}();return N("main",{className:"main"},N("div",{className:" login-container container",style:{marginTop:"0",position:"relative"}},N("div",{style:{zIndex:"99",position:"absolute",width:"100%",left:"0",right:"0",background:"white"},className:"custom_loginresp"},N("div",null,N(y.ZP,null))),N("div",{className:"container custom_login_space"},N("nav",{"aria-label":"breadcrumb",className:"breadcrumb-nav mb-0",style:{paddingBottom:"15px",borderBottom:"1px solid #F0F0F0"}},N("div",{className:"container"},N("ol",{className:"breadcrumb"},N("li",{className:"breadcrumb-item"},N(c.Z,{href:"/"},N(h.QO$,{style:{fontSize:"16px"}}))),N("li",{className:"breadcrumb-item active","aria-current":"page"},N(c.Z,{className:"activeitem",href:"/pages/orders"},"Login")))))),N("div",{className:"row"},N("div",{className:"col-lg-12 mx-auto custom_headlog"},n?N("div",{className:"row custom-loginleft"},N("div",{className:"col-md-6"},N("div",{className:"heading mb-1 otpcontainer"},N("h2",{className:"title"},"Verify Phone Number"),N("div",{className:""},N("p",{className:"",style:{marginTop:"20px",paddingBottom:"20px",fontSize:"12px",color:"#777777",fontWeight:"400"}},"Secure Your Account, Shop With Confidence."))),N("form",{style:{marginTop:"70px"}},N("div",{className:"mt-3"},N(d,{value:I,onChange:P,numInputs:5,containerStyle:{textAlign:"center",width:"60px",height:"60px",gap:"24px"},renderInput:function(e){return N("input",(0,r.Z)({},e,{className:"otpbox"}))}}),N("button",{type:"submit",className:"btn btn-dark btn-md ",style:{marginTop:"48px",fontWeight:"600"},onClick:j},"Verify OTP"),T&&N("div",{style:{color:"red"}},T),N("div",{className:"resend-action",style:{marginTop:"33px"}},N("p",{style:{fontWeight:"400",fontSize:"12px",color:"#000000"}},"Don't have OTP ?",N("span",{style:{paddingLeft:"5px",color:"#399E0A",fontWeight:"500",cursor:"pointer"},className:"btn-text",onClick:z},"Resent")))))),N("div",{className:"col-md-6"},N("div",null,N("img",{class:"google-icon",src:"images\\brands\\loginBanner.svg"})))):N("div",{className:"row custom-loginleft"},N("div",{className:"col-md-6 left-login-section"},N("div",{className:"heading mb-1"},N("h2",{className:"title"},"Login/ Register to your account"),N("div",{className:""},N("p",{className:"",style:{marginTop:"20px",fontSize:"12px",color:"#777777",fontWeight:"400"}},"Access Exclusive Offer Now."))),N("div",null),N("form",{style:{marginTop:"70px"}},N("div",{className:"container"},N("div",{className:"input-group",style:{position:"relative"}},N("div",{className:"input-group-prepend",style:{position:"absolute"}},N("span",{className:"input-group-text countrycodeinput",style:{padding:"10px"}},N("img",{src:"images/brands/flag1.svg",alt:"Flag",width:"24",height:"20"}),"+968")),N("input",{type:"number",placeholder:"Enter Mobile Number",className:"form-input form-wide",value:p,onChange:function(e){return m(e.target.value)},style:{outline:"none",paddingLeft:"73px"}}))),x&&N("div",{style:{color:"red"}},x),N("button",{type:"submit",className:"btn btn-dark btn-md ",style:{marginTop:"36px",fontWeight:"600"},onClick:M},"GET OTP"))),N("div",{className:"col-md-6",style:{paddingRight:"0"}},N("div",null,N("img",{class:"google-icon",src:"images\\brands\\loginBanner.svg"}))))))))}))},749:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pages/login",function(){return n(3918)}])}},function(e){e.O(0,[9774,2888,179],(function(){return t=749,e(e.s=t);var t}));var t=e.O();_N_E=t}]);