(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9839],{4140:function(t,e,a){"use strict";a.r(e);var r=a(809),n=a.n(r),c=a(2447),o=a(6265),l=a(4121),s=a(7261),u=a(7294),i=a(1163),d=a(8216),p=a(8974),m=a(7029),f=a(2806),b=a(2821),v=a(1649),g=a(6058),h=a(1919),N=a(4718),y=a(3331),k=a(2132),x=u.createElement;function C(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?C(Object(a),!0).forEach((function(e){(0,o.Z)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function w(){var t=(0,s.Z)(["\n  mutation RemoveFromCart($input: removeFromCartInput!) {\n    removeFromCart(input: $input) {\n      message\n    }\n  }\n"]);return w=function(){return t},t}function P(){var t=(0,s.Z)(["\n  mutation UpdateCartQuantity($input: updateCartQuantityInput!) {\n    updateCartQuantity(input: $input) {\n      message\n    }\n  }\n"]);return P=function(){return t},t}function Z(){var t=(0,s.Z)(["\n  query GetCart {\n    getCart {\n      products {\n        _id\n        productId\n        quantity\n        name\n        shortDescription\n        stock\n        color\n        size\n        price\n        image\n        sellingPrice\n        mrp\n      }\n      grandTotal\n      subTotal\n      deliveryCharge\n    }\n  }\n"]);return Z=function(){return t},t}var T=(0,g.Ps)(Z()),j=(0,g.Ps)(P()),I=(0,g.Ps)(w());e.default=(0,y.Z)({ssr:!1})((0,d.$j)((function(t){return{cart:t.cartlist.cart?t.cartlist.cart:[]}}),O({},f.Nw))((function(t){var e=(0,i.useRouter)(),a=(0,u.useState)([]),r=a[0],o=a[1],s=(0,u.useState)({grandTotal:0,subTotal:0,deliveryCharge:0}),d=s[0],f=s[1],g=(0,h.D)(j),y=(0,l.Z)(g,1)[0],C=(0,h.D)(I),w=(0,l.Z)(C,1)[0],P=localStorage.getItem("arabtoken"),Z=(0,N.a)(T,{skip:!P}),S=Z.data,_=(Z.loading,Z.error),E=Z.refetch;(0,u.useEffect)((function(){if(P)_?console.error("Error fetching cart data:",_):S&&(o(S.getCart.products||[]),f({grandTotal:S.getCart.grandTotal,subTotal:S.getCart.subTotal,deliveryCharge:S.getCart.deliveryCharge})),E();else{var t=JSON.parse(localStorage.getItem("cart"));if(t&&t.length>0){o(t);var e=t.reduce((function(t,e){return t+e.price*e.quantity}),0);f(O(O({},d),{},{subTotal:e}))}}}),[S]);var R=function(){var t=(0,c.Z)(n().mark((function t(e){var a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w({variables:{input:{productId:e}}});case 3:a=t.sent,E(),k.Am.success("successfully removed product"),console.log(a),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=(0,c.Z)(n().mark((function t(e,a){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e,a),t.next=4,y({variables:{input:{productId:e,quantity:a}}});case 4:if(r=t.sent,console.log(r),!r){t.next=8;break}return t.abrupt("return",E());case 8:console.log(r),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}();return x("main",{className:"main"},x("nav",{"aria-label":"breadcrumb",className:"breadcrumb-nav"},x("div",{className:"container"},x("ol",{className:"breadcrumb"},x("li",{className:"breadcrumb-item"},x(p.Z,{href:"/"},x(v.QO$,{style:{fontSize:"16px"}}))),x("li",{className:"breadcrumb-item active","aria-current":"page"},x(p.Z,{className:"activeitem",href:"/pages/cart"},"Shoping cart"))))),x("div",{className:" d-flex flex-column align-items-center"},x("ul",{className:"checkout-progress-bar d-flex justify-content-center flex-wrap",style:{backgroundColor:"#F9F9F9",width:"100%"}},x("li",{className:"active"},x(p.Z,{href:"/pages/cart"},"Shoping cart")),x("li",{className:""},x(p.Z,{href:"/pages/checkout"},"checkout")),x("li",{className:""},x(p.Z,{href:"/pages/checkout"},"Order Complete")))),x("div",{className:"container",style:{marginTop:"70px"}},0===(null===r||void 0===r?void 0:r.length)?x("div",{className:"cart-table-container"},x("div",{className:"table table-cart"},x("div",{className:"cart-empty-page text-center"},x("i",{className:"icon-bag-2"}),x("p",null,"No products added to the cart"),x(p.Z,{href:"/shop",className:"btn btn-dark btn-add-cart product-type-simple btn-shop font1"},"return to shop")))):x("div",{className:"row"},x("div",{className:"col-lg-8"},x("div",{className:"cart-table-container"},x("table",{className:"table table-cart"},x("thead",null,x("tr",null,x("th",{className:"thumbnail-col"},"Product"),x("th",{className:"product-col pl-0"}),x("th",{className:"price-col"},"Price"),x("th",{className:"qty-col"},"Quantity"),x("th",{className:"text-right"},"Subtotal"))),x("tbody",null,null===r||void 0===r?void 0:r.map((function(t,e){return x("tr",{key:"cart-item"+e,className:"product-row",style:{color:"black"}},x("td",{className:"pl-0"},x("figure",{className:"product-image-container"},x(p.Z,{href:"/product/default/".concat(t.productId),className:"product-image"},x("img",{src:null===t||void 0===t?void 0:t.image,alt:"product"})),x("div",{title:"Remove Product",style:{width:"20px",height:"20px",position:"absolute",top:"-7px",display:"flex",justifyContent:"center",alignItems:"center",right:"-5px",borderRadius:"50%",filter:"drop-shadow(1px 1px 6px rgba(0, 0, 0, 0.11))"},className:"hoverinto",onClick:function(a){a.preventDefault(),R(t.productId,e)}},x(b.oHP,{style:{fontSize:"10px"}})))),x("td",{className:"product-col"},x("h5",{className:"product-title"},x(p.Z,{href:"/product/default/".concat(null===t||void 0===t?void 0:t.productId)},t.name))),x("td",null,"OMR ",t.price.toFixed(2)),x("td",null,x(m.Z,{value:null===t||void 0===t?void 0:t.quantity,max:10,onChangeQty:function(e){return D(null===t||void 0===t?void 0:t.productId,e)}})),x("td",{className:"text-right"},x("span",{className:"subtotal-price"},"OMR ",(parseInt(t.price)*parseInt(t.quantity)).toFixed(2))))}))),x("tfoot",null)))),x("div",{className:"col-lg-4"},x("div",{className:"cart-summary"},x("h3",null,"Cart Totals"),x("table",{className:"table table-totals"},x("tbody",null,P&&x("tr",null,x("td",null,"Shipping Charge"),x("td",{style:{color:"black"}},"OMR ",d.deliveryCharge)),x("tr",null,x("td",null,"Subtotal"),x("td",{style:{color:"black"}},"OMR ",d.subTotal))),x("tfoot",null,P&&x("tr",null,x("td",null,"Total"),x("td",null,"OMR ",d.grandTotal)))),x("div",{className:"checkout-methods"},x("div",{href:"checkout",className:"btn btn-block btn-dark hoverbtn",onClick:function(){e.push("/pages/checkout")}},"Proceed to Checkout")))))),x("div",{className:"mb-6"}))})))},714:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pages/cart",function(){return a(4140)}])}},function(t){t.O(0,[9774,2888,179],(function(){return e=714,t(t.s=e);var e}));var e=t.O();_N_E=e}]);